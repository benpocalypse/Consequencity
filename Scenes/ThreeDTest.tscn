[gd_scene load_steps=7 format=2]

[ext_resource path="res://Source/ThreeDTest.cs" type="Script" id=1]
[ext_resource path="res://Components/UserInterface.tscn" type="PackedScene" id=2]
[ext_resource path="res://Assets/Graphics/Backgrounds/blank.jpg" type="Texture" id=3]
[ext_resource path="res://Assets/Audio/Music/Komiku - The road we use to travel when we were kids.mp3" type="AudioStream" id=4]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform float limit: hint_range(0.0,0.5) = 0.2;
uniform float blur: hint_range(0.0,5.0) = 2.0;
uniform float intensity: hint_range (0.0, 0.5) = 0.19;
uniform bool debug = true;

void fragment(){
	
 	if (UV.y<limit){
			
		float _step = smoothstep(UV.y,limit,intensity);
		vec4 color = textureLod(SCREEN_TEXTURE, SCREEN_UV, blur);
		COLOR = color;
		
		if (debug==true){
			COLOR = vec4(1.0,1.0,1.0,1.0)
			}
			
		COLOR.a = _step;
		
	} else if (UV.y > 1.0-limit){
			
		float _step = smoothstep(UV.y,1.0-limit,1.0-intensity);
		vec4 color = textureLod(SCREEN_TEXTURE, SCREEN_UV, blur);
		COLOR = color;
		
		if (debug==true){
			COLOR = vec4(1.0,1.0,1.0,1.0)
			}
		COLOR.a = _step;
			
	}
	else
	{
		COLOR.a = 0f; 
	}
}
"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/limit = 0.5
shader_param/blur = 3.64
shader_param/intensity = 0.395
shader_param/debug = false

[node name="Spatial" type="Spatial"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00707543, 2.38419e-07, -0.00277948 )
script = ExtResource( 1 )

[node name="UiLayer" type="CanvasLayer" parent="."]

[node name="UserInterface" parent="UiLayer" instance=ExtResource( 2 )]

[node name="TiltShiftLayer" type="CanvasLayer" parent="."]
layer = 0

[node name="TiltShift" type="Control" parent="TiltShiftLayer"]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MarginContainer" type="MarginContainer" parent="TiltShiftLayer/TiltShift"]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureRect" type="TextureRect" parent="TiltShiftLayer/TiltShift/MarginContainer"]
material = SubResource( 2 )
margin_right = 1920.0
margin_bottom = 1080.0
texture = ExtResource( 3 )

[node name="Cambase" type="Spatial" parent="."]
transform = Transform( 0.838671, 0, 0.544639, 0, 1, 0, -0.544639, 0, 0.838671, 0, 0, 0 )

[node name="Camera" type="Camera" parent="Cambase"]
transform = Transform( -4.37114e-08, 0.5, -0.866026, 0, 0.866025, 0.5, 1, 2.18557e-08, -3.78552e-08, -10, 5, 0 )
fov = 53.4375

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 4 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.866025, 2.18557e-08, 0.5, -0.25, 0.866025, 0.433013, -0.433013, -0.5, 0.75, 168, 19.1497, 2.38046e-06 )
shadow_enabled = true
